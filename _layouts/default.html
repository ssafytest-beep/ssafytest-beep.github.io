---
layout: compress
---

<!doctype html>

{% include origin-type.html %}

{% include lang.html %}

{% if site.theme_mode %}
{% capture prefer_mode %}data-mode="{{ site.theme_mode }}"{% endcapture %}
{% endif %}

<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="{{ page.lang | default: site.alt_lang | default: site.lang }}" {{ prefer_mode }}>
{% include head.html lang=lang %}

<body>
  {% include sidebar.html lang=lang %}

  <div id="main-wrapper" class="d-flex justify-content-center">
    <div class="container d-flex flex-column px-xxl-5">
      {% include topbar.html lang=lang %}

      <div class="row flex-grow-1">
        <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
          {% if layout.layout == 'default' %}
          {% include refactor-content.html content=content lang=lang %}
          {% else %}
          {{ content }}
          {% endif %}
        </main>

        <!-- panel -->
        <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted">
          <div class="access">
            {% include_cached update-list.html lang=lang %}
            {% include_cached trending-tags.html lang=lang %}
          </div>

          {% for _include in layout.panel_includes %}
          {% assign _include_path = _include | append: '.html' %}
          {% include {{ _include_path }} lang=lang %}
          {% endfor %}
        </aside>
      </div>

      <div class="row">
        <!-- tail -->
        <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
          {% for _include in layout.tail_includes %}
          {% assign _include_path = _include | append: '.html' %}
          {% include {{ _include_path }} lang=lang %}
          {% endfor %}

          {% include_cached footer.html lang=lang %}
        </div>
      </div>

      {% include_cached search-results.html lang=lang %}
    </div>

    <aside aria-label="Scroll to Top">
      <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
        <i class="fas fa-angle-up"></i>
      </button>
    </aside>
  </div>

  <div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div>

  {% if site.pwa.enabled %}
  {% include_cached notification.html lang=lang %}
  {% endif %}

  <!-- Embedded scripts -->

  {% for _include in layout.script_includes %}
  {% assign _include_path = _include | append: '.html' %}
  {% include {{ _include_path }} %}
  {% endfor %}

  {% include_cached search-loader.html lang=lang %}
  <script>
    (function () {
      console.log("üîç [Eggit] Visitor Tracking Start...");
      const hostname = window.location.hostname;

      /* [1] Deploy Env Check */
      const isLocal = hostname.includes('localhost') || hostname.includes('127.0.0.1');

      /* [2] API URL */
      const apiBaseUrl = isLocal ? 'http://localhost:8000' : 'https://i14b107.p.ssafy.io';

      /* [3] Username Extraction */
      let username = "{{ site.repo_owner }}";

      /* Fallback logic */
      if (!username || username.trim() === "" || username.includes('site.repo_owner')) {
        const part = hostname.split('.')[0];
        username = (part === 'localhost' || part === '127') ? 'local-test' : part;
      }

      console.log('üë§ [Eggit] Detected Owner: ' + username + ', LocalMode: ' + isLocal);

      /* [4] Session Check */
      const today = new Date().toISOString().slice(0, 10);
      const sessionKey = 'eggit_visited_' + username + '_' + today;

      if (sessionStorage.getItem(sessionKey)) {
        console.log("‚ÑπÔ∏è [Eggit] Visit already logged today.");
        return;
      }

      console.log('üöÄ [Eggit] Sending visit log to ' + apiBaseUrl);

      fetch(apiBaseUrl + '/api/v1/dashboard/visit', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ repo_owner: username, is_test: isLocal }),
        keepalive: true
      }).then(res => {
        if (res.ok) {
          console.log("‚úÖ [Eggit] Visit Logged Successfully!");
          sessionStorage.setItem(sessionKey, 'true');
        } else {
          console.warn("‚ö†Ô∏è [Eggit] Server responded with:", res.status);
        }
      }).catch(e => console.error("‚ùå [Eggit] Tracking Error:", e));
    })();
  </script>
</body>

</html>